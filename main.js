const translations = {
  en: {
    header: ["Our Products", "Our Story", "Our Water", "Our Contact"],
    slider1_title: ["Download The", "Alam Water", "App Now"],
    slider1_desc: ["and enjoy a convenient and", "easy shopping experience."],
    our_products_title: "Our Products",
    our_products_btn:["500 ml", "330 ml", "200 ml"],
    our_products_desc_500: "clock in the production process, with quantities issued from the production line exceeding 500,000 packages per day. The plant produces vials with various capacities, including 1500 ml vials, 500 ml vials, 330 ml vials, and 200 ml mugs. We strive to achieve an increase in production by improving workforce performance and increasing the efficiency of technicians and specialists, as well as attention to the quality of raw materials and the quality of the final product.",
    our_products_desc_330: "clock in the production process, with quantities issued from the production line exceeding 500,000 packages per day. The plant produces vials with various capacities, including 1500 ml vials, 500 ml vials, 330 ml vials, and 200 ml mugs. We strive to achieve an increase in production by improving workforce performance and increasing the efficiency of technicians and specialists, as well as attention to the quality of raw materials and the quality of the final product.",
    our_products_desc_200: "clock in the production process, with quantities issued from the production line exceeding 500,000 packages per day. The plant produces vials with various capacities, including 1500 ml vials, 500 ml vials, 330 ml vials, and 200 ml mugs. We strive to achieve an increase in production by improving workforce performance and increasing the efficiency of technicians and specialists, as well as attention to the quality of raw materials and the quality of the final product.",
    our_story_title1: ["Our story began", "with trusted,", "quality water."],
    our_story2_title: "Story began",
    our_story2_desc_1999: "around the clock in the production process, with quantities issued from the production line exceeding 500,000 packages per day. The plant produces vials with various capacities, including 1500 ml vials, 500 ml vials, 330 ml vials, and 200 ml mugs. We strive to achieve an increase in production by improving workforce performance and increasing the efficiency of technicians and specialists, as well as attention to the quality of raw materials we",
    our_story2_desc_2010: "around the clock in the production process, with quantities issued from the production line exceeding 500,000 packages per day. The plant produces vials with various capacities, including 1500 ml vials, 500 ml vials, 330 ml vials, and 200 ml mugs. We strive to achieve an increase in production by improving workforce performance and increasing the efficiency of technicians and specialists, as well as attention to the quality of raw materials we",
    our_story2_desc_2025: "around the clock in the production process, with quantities issued from the production line exceeding 500,000 packages per day. The plant produces vials with various capacities, including 1500 ml vials, 500 ml vials, 330 ml vials, and 200 ml mugs. We strive to achieve an increase in production by improving workforce performance and increasing the efficiency of technicians and specialists, as well as attention to the quality of raw materials we",
    our_contact_title: "Contact Us",
    our_contact2_1_title1: ["We are always ready", "to help you and", "answer your", "questions."],
    our_contact2_1_number: "Call Center",
    our_contact2_1_email: "Email",
    our_contact2_1_our_location: "Our Location",
    our_contact2_1_location: "Iraq - Basra - Alhussin Destruction",
    our_contact2_1_Social_Network: "Social Network",
    our_contact2_2_title: "Get in Touch",
    our_contact2_2_desc: "Define your goals and identify areas where we can add value to your business",
    our_contact2_2_input_full_name: "Full Name",
    our_contact2_2_input_email: "Email",
    our_contact2_2_input_subject: "Subject",
    our_contact2_2_input_message: "Message",
    our_contact2_2_button: "Send Message",
    footer_link: ["home", "our products", "our story", "our water", "our contact"],
    footer_desc: "Our company works around the clock in the production process, with quantities issued from the production line exceeding 500,000 packages per day. The plant produces vials with various capacities, including 1500 ml vials, 500 ml vials, 330 ml vials, and 200 ml mugs. We strive to achieve an increase in production by improving workforce performance and increasing the efficiency of technicians and specialists, as well as attention to the quality of raw materials we use.",
    footer_app: "Download App Now",
    footer_copyright: "© 2025 Alam Healthy Water . All Rights Reserved. Al-Rawan Company for the Production of Soft Drinks and Healthy Water.",
    button: "AR",
  },
  ar: {
    header: ["منتجاتنا", "قصتنا", "مياهنا", "اتصل بنا"],
    slider1_title: ["حمّل تطبيق", "مياه العالم", "الآن"],
    slider1_desc: ["واستمتع بتجربة تسوق", "سهلة ومريحة."],
    our_products_title: "منتجاتنا",
    our_products_btn: ["500 مل", "330 مل", "200 مل"],
    our_products_desc_500: "يعمل مصنعنا على مدار الساعة في عملية الإنتاج، حيث تتجاوز الكميات الصادرة من خط الإنتاج 500,000 عبوة يوميًا. ينتج المصنع عبوات بسعات مختلفة، بما في ذلك عبوات 1500 مل، و500 مل، و330 مل، وأكواب 200 مل. نسعى لتحقيق زيادة في الإنتاج من خلال تحسين أداء القوى العاملة وزيادة كفاءة الفنيين والمتخصصين، بالإضافة إلى الاهتمام بجودة المواد الخام وجودة المنتج النهائي.",
    our_products_desc_330: "يعمل مصنعنا على مدار الساعة في عملية الإنتاج، حيث تتجاوز الكميات الصادرة من خط الإنتاج 500,000 عبوة يوميًا. ينتج المصنع عبوات بسعات مختلفة، بما في ذلك عبوات 1500 مل، و500 مل، و330 مل، وأكواب 200 مل. نسعى لتحقيق زيادة في الإنتاج من خلال تحسين أداء القوى العاملة وزيادة كفاءة الفنيين والمتخصصين، بالإضافة إلى الاهتمام بجودة المواد الخام وجودة المنتج النهائي.",
    our_products_desc_200: "يعمل مصنعنا على مدار الساعة في عملية الإنتاج، حيث تتجاوز الكميات الصادرة من خط الإنتاج 500,000 عبوة يوميًا. ينتج المصنع عبوات بسعات مختلفة، بما في ذلك عبوات 1500 مل، و500 مل، و330 مل، وأكواب 200 مل. نسعى لتحقيق زيادة في الإنتاج من خلال تحسين أداء القوى العاملة وزيادة كفاءة الفنيين والمتخصصين، بالإضافة إلى الاهتمام بجودة المواد الخام وجودة المنتج النهائي.",
    our_story_title1: ["بدأت قصتنا", "بمياه موثوقة", "وعالية الجودة."],
    our_story2_title: "بدأت القصة",
    our_story2_desc: "بمياه موثوقة وعالية الجودة.",
    our_story2_button: "اكتشف المزيد",
    our_story2_desc_1999: "يعمل مصنعنا على مدار الساعة في عملية الإنتاج، حيث تتجاوز الكميات الصادرة من خط الإنتاج 500,000 عبوة يوميًا. ينتج المصنع عبوات بسعات مختلفة، بما في ذلك عبوات 1500 مل، و500 مل، و330 مل، وأكواب 200 مل. نسعى لتحقيق زيادة في الإنتاج من خلال تحسين أداء القوى العاملة وزيادة كفاءة الفنيين والمتخصصين، بالإضافة إلى الاهتمام بجودة المواد الخام وجودة المنتج النهائي.",
    our_story2_desc_2010: "يعمل مصنعنا على مدار الساعة في عملية الإنتاج، حيث تتجاوز الكميات الصادرة من خط الإنتاج 500,000 عبوة يوميًا. ينتج المصنع عبوات بسعات مختلفة، بما في ذلك عبوات 1500 مل، و500 مل، و330 مل، وأكواب 200 مل. نسعى لتحقيق زيادة في الإنتاج من خلال تحسين أداء القوى العاملة وزيادة كفاءة الفنيين والمتخصصين، بالإضافة إلى الاهتمام بجودة المواد الخام وجودة المنتج النهائي.",
    our_story2_desc_2025: "يعمل مصنعنا على مدار الساعة في عملية الإنتاج، حيث تتجاوز الكميات الصادرة من خط الإنتاج 500,000 عبوة يوميًا. ينتج المصنع عبوات بسعات مختلفة، بما في ذلك عبوات 1500 مل، و500 مل، و330 مل، وأكواب 200 مل. نسعى لتحقيق زيادة في الإنتاج من خلال تحسين أداء القوى العاملة وزيادة كفاءة الفنيين والمتخصصين، بالإضافة إلى الاهتمام بجودة المواد الخام وجودة المنتج النهائي.",
    our_contact_title: "اتصل بنا",
    our_contact2_1_title1: ["نحن دائمًا جاهزون", "لمساعدتك و", "للإجابة على", "أسئلتك."],
    our_contact2_1_number: "مركز الاتصال",
    our_contact2_1_email: "البريد الإلكتروني",
    our_contact2_1_our_location: "موقعنا",
    our_contact2_1_location: "العراق - البصرة - تدمير الحسين",
    our_contact2_1_Social_Network: "الشبكات الاجتماعية",
    our_contact2_2_title: "تواصل معنا",
    our_contact2_2_desc: "إذا كان لديك أي استفسارات أو تحتاج إلى مزيد من المعلومات، فلا تتردد في التواصل معنا عبر القنوات التالية.",
    our_contact2_2_input_full_name: "الاسم الكامل",
    our_contact2_2_input_email: "البريد الإلكتروني",
    our_contact2_2_input_message: "رسالتك",
    our_contact2_2_input_subject: "الموضوع",
    our_contact2_2_button: "إرسال الرسالة",
    footer_link: ["الرئيسية", "منتجاتنا", "قصتنا", "مياهنا", "اتصل بنا"],
    footer_desc: "يعمل مصنعنا على مدار الساعة في عملية الإنتاج، حيث تتجاوز الكميات الصادرة من خط الإنتاج 500,000 عبوة يوميًا. ينتج المصنع عبوات بسعات مختلفة، بما في ذلك عبوات 1500 مل، و500 مل، و330 مل، وأكواب 200 مل. نسعى لتحقيق زيادة في الإنتاج من خلال تحسين أداء القوى العاملة وزيادة كفاءة الفنيين والمتخصصين، بالإضافة إلى الاهتمام بجودة المواد الخام وجودة المنتج النهائي.",
    footer_app: "حمّل التطبيق الآن",
    footer_copyright: "© 2025 مياه العلم الصحية. جميع الحقوق محفوظة. شركة الروان لإنتاج المشروبات الغازية والمياه الصحية.",
    button: "EN",
  },
};
let currentLang = "en";

// ****************** Loading Screen Class ******************
class LoadingScreen {
  constructor() {
    this.loader = document.getElementById("loading-screen");
    this.mainContent = document.getElementById("main-content");
    this.loadingDuration = 2000; // 2 seconds
    this.init();
  }
  init() {
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", () => this.handlePageLoad());
    } else {
      this.handlePageLoad();
    }
  }
  handlePageLoad() {
    setTimeout(() => this.hideLoader(), this.loadingDuration);
  }
  hideLoader() {
    this.loader.classList.add("fade-out");
    setTimeout(() => {
      this.loader.style.display = "none";
      this.mainContent.classList.add("show");
      new WOW().init();

      // After loader hides, bind interactions & translations
      applyTranslations();
      bindInteractions();
    }, 800);
  }
}

// Kick off the loading screen
new LoadingScreen();

// Skip loader on click
document.getElementById("loading-screen").addEventListener("click", function() {
  if (!this.classList.contains("fade-out")) {
    new LoadingScreen().hideLoader();
  }
});

// ****************** Translation & Binding ******************
function applyTranslations() {
  const data = translations[currentLang];

  // Single elements
document.querySelectorAll("[data-i18n]").forEach(el => {
  const key = el.getAttribute("data-i18n");
  if (!data[key]) return;

  if (el.tagName === "INPUT" || el.tagName === "TEXTAREA") {
    el.placeholder = data[key];
  } else if (el.tagName === "BUTTON") {
    el.textContent = data[key];
  } else {
    el.textContent = data[key];
  }
});

  // Arrays
  document.querySelectorAll("[data-i18n-array]").forEach(el => {
    const key = el.getAttribute("data-i18n-array");
    const idx = +el.getAttribute("data-index");
    if (Array.isArray(data[key]) && data[key][idx] != null) {
      el.textContent = data[key][idx];
    }
  });

  // Toggle button
  document.getElementById("toggleLangBtn").textContent = data.button;

  // Reinitialize sections
  const activeProdBtn = document.querySelector(".OurProducts .button_active.active");
  if (activeProdBtn) changeText(activeProdBtn);

  const activeYear = document.querySelector(".timeline-year.highlight");
  if (activeYear) changeTimeline(activeYear);

  // Set direction and style based on currentLang
const dir = currentLang === "ar" ? "rtl" : "ltr";
const styleClass = currentLang === "ar" ? "arabic-style" : "english-style";

// مثلا نطبقها على body والـ form
// document.body.setAttribute("dir", dir);

// مثال: تغيير الاتجاه والشكل لعناصر معينة حسب ID
const idsToUpdate = ["our_products_translations", "our_story_translations", "our_story2_translations", "our_contact2","footer_desc","swiper1_content_translations"];
idsToUpdate.forEach(id => {
  const el = document.getElementById(id);
  if (el) {
    // إزالة الكلاسات القديمة إن وجدت
    el.classList.remove("arabic-style", "english-style");

    // إضافة الكلاس المناسب
    el.classList.add(styleClass);
  }
});

}

function bindInteractions() {
  // Toggle language button
  document.getElementById("toggleLangBtn").addEventListener("click", () => {
    currentLang = currentLang === "ar" ? "en" : "ar";
    applyTranslations();
  });

  // OurProducts buttons
  document.querySelectorAll(".OurProducts .button_active").forEach(btn => {
    btn.addEventListener("click", () => changeText(btn));
  });

  // Timeline years
  document.querySelectorAll(".timeline-year").forEach(el => {
    el.addEventListener("click", () => changeTimeline(el));
  });

  // IntersectionObservers
  new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        document.getElementById("product-image").classList.add("animate__fadeInLeft", "show");
      }
    });
  }, { threshold: 0.5 }).observe(document.getElementById("product-image"));

  new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        document.getElementById("Story-image").classList.add("animate__fadeInRight", "show");
      }
    });
  }, { threshold: 0.5 }).observe(document.getElementById("Story-image"));
}

// ****************** Section Handlers ******************
function changeText(btn) {
  const data = translations[currentLang];
  const key = btn.getAttribute("data-desc-key");
  const text = data[key];
  const imgSrc = btn.getAttribute("data-image");
  const p = document.getElementById("product-text");
  const img = document.getElementById("product-image");

  document.querySelectorAll(".button_active").forEach(x => x.classList.remove("active"));
  btn.classList.add("active");

  p.classList.replace("fade-in", "fade-out");
  img.classList.replace("animate__fadeInLeft", "animate__fadeOutLeft");

  setTimeout(() => {
    p.textContent = text;
    img.src = imgSrc;
    p.classList.replace("fade-out", "fade-in");
    img.classList.replace("animate__fadeOutLeft", "animate__fadeInLeft");
  }, 500);
}

function changeTimeline(el) {
  const data = translations[currentLang];
  document.querySelectorAll(".timeline-year").forEach(y => y.classList.remove("highlight"));
  el.classList.add("highlight");

  const key = el.getAttribute("data-desc-key");
  const text = data[key];
  const imgSrc = el.getAttribute("data-image");
  const p = document.getElementById("timeline-text");
  const img = document.getElementById("Story-image");

  p.classList.replace("fade-in", "fade-out");
  img.classList.replace("animate__fadeInLeft", "animate__fadeOutRight");

  setTimeout(() => {
    p.textContent = text;
    img.src = imgSrc;
    p.classList.replace("fade-out", "fade-in");
    img.classList.replace("animate__fadeOutRight", "animate__fadeInLeft");
  }, 500);
}

// id
// our_products_translations
// our_story_translations
// our_story2_translations
// our_contact2_translations